{"version":3,"sources":["Services/AuthService.js","Context/AuthContext.js","Components/NavBar.js","Components/Home.js","Components/Message.js","Components/Login.js","Components/Register.js","Components/TodoItem.js","Services/TodoService.js","Components/Todos.js","Components/MapComponent.js","hocs/PrivateRoute.js","App.js","index.js"],"names":["user","fetch","method","body","JSON","stringify","headers","then","res","status","json","data","isAuthenticated","username","AuthContext","createContext","children","useState","setUser","setIsAuthenticated","isLoaded","setIsLoaded","useEffect","AuthService","Provider","value","NavBar","props","useContext","onClickLogoutHandler","success","Navbar","bg","expand","Brand","href","Toggle","aria-controls","Collapse","id","Nav","className","Link","type","onClick","Home","Message","message","msgError","Alert","variant","msgBody","Login","password","setmessage","authContext","onChange","e","target","name","console","log","onSubmit","preventDefault","history","push","htmlFor","placeholder","Register","setMessage","timeID","useRef","clearTimeout","resetForm","setTimeout","TodoItem","todo","response","Todos","setTodo","todos","setTodos","TodoService","map","key","_id","getData","WebMapView","Location","favourite","setFavourite","onSaveFav","useCallback","event","action","popupInfo","viewRef","current","popup","selectedFeature","attributes","axios","post","config","mapRef","loadModules","css","ArcGISMap","MapView","Locate","Graphic","GraphicsLayer","basemap","view","container","center","zoom","locateWidget","graphic","symbol","coordsWidget","document","createElement","showCoordinates","pt","coords","latitude","toFixed","longitude","Math","round","scale","innerHTML","style","padding","ui","add","watch","isStationary","on","evt","toMap","x","y","graphicsLayer","simpleMarkerSymbol","color","outline","width","actions","title","get","dots","i","length","popupTemplate","Name","content","pointGraphic","geometry","point","ref","PrivateRoute","component","rest","render","to","pathname","state","from","location","App","exact","path","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.8ae48138.chunk.js","sourcesContent":["\nexport default {\n  login : user =>{\n    return fetch('/user/login', {\n      method : \"post\",\n      body: JSON.stringify(user),\n      headers : {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if(res.status !== 401)\n          return res.json().then(data => data)\n            else \n              return { isAuthenticated: false, user : {username: \"\"}}\n    })\n  },\n\n  register : user =>{\n    return fetch('/user/register', {\n      method : \"post\",\n      body: JSON.stringify(user),\n      headers : {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => res.json())\n      .then(data => data);\n  },\n\n  logout : () => {\n    return fetch('/user/logout')\n            .then(res => res.json())\n            .then(data => data)\n  },\n  //Sync our backend and frontend together \n  isAuthenticated : () => {\n      return fetch('/user/authenticated')\n              .then(res=>{\n                if(res.status !== 401)\n                  return res.json().then(data => data);\n                else \n                  return { isAuthenticated: false, user : {username: \"\"}}\n              })\n  }\n\n}","import React, {createContext, useState, useEffect} from 'react';\nimport AuthService from '../Services/AuthService';\n\nexport const AuthContext = createContext();\n\nexport default ({ children }) => {\n\n  const [user,setUser] = useState(null);\n  const [isAuthenticated,setIsAuthenticated] = useState(false);\n  const [isLoaded,setIsLoaded] = useState(false);\n\n  useEffect(()=>{\n      AuthService.isAuthenticated().then(data => {\n      setUser(data.user);\n      setIsAuthenticated(data.isAuthenticated);\n      setIsLoaded(true);\n    })\n  }, [])\n\n  return(\n    <div>\n      {!isLoaded? <h1>Loading</h1> : \n      <AuthContext.Provider value={{user,setUser,isAuthenticated,setIsAuthenticated}}>\n        { children }\n      </AuthContext.Provider> \n      }\n    </div>\n  )\n\n}","import React, {useContext} from 'react';\nimport AuthService from '../Services/AuthService';\nimport {AuthContext} from '../Context/AuthContext';\nimport {Navbar, Nav} from 'react-bootstrap';\n\nconst NavBar = props => {\n    const {isAuthenticated, user, setIsAuthenticated, setUser} = useContext(AuthContext);\n    \n    const onClickLogoutHandler = () =>{\n      AuthService.logout().then(data =>{\n        if(data.success){\n          setUser(data.user);\n          setIsAuthenticated(false);\n        }\n      })\n    }\n    \n    const unauthenticatedNavBAr = () => {\n      return(\n        <>\n        <Nav.Link href=\"/\">\n          <li className=\"nav-item nav-link\">\n            Home\n          </li>\n        </Nav.Link>\n        <Nav.Link href=\"/login\">\n          <li className=\"nav-item nav-link\">\n            Login\n          </li>\n        </Nav.Link>\n        <Nav.Link href=\"/register\">\n          <li className=\"nav-item nav-link\">\n            Register\n          </li>\n        </Nav.Link>\n        </>\n      )\n    }\n\n    const authenticatedNavBar = () => {\n      return(\n        <>\n        <Nav.Link href=\"/\">\n        <li className=\"nav-item nav-link\">\n          Home\n        </li>\n      </Nav.Link>\n      <Nav.Link href=\"/todos\">\n        <li className=\"nav-item nav-link\">\n          To-dos\n        </li>\n      </Nav.Link>\n      <Nav.Link href=\"/map\">\n        <li className=\"nav-item nav-link\">\n          Map\n        </li>\n      </Nav.Link>\n      <button type=\"button\" className=\"btn btn-link nav-item nav-link\" \n      onClick={onClickLogoutHandler}>\n        Logout\n      </button>\n      </>\n      )\n    }\n    return (\n      <Navbar bg=\"light\" expand=\"lg\">\n      <Navbar.Brand href=\"#home\">Mapp-App</Navbar.Brand>\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"mr-auto\">\n         { !isAuthenticated ? unauthenticatedNavBAr() : authenticatedNavBar() }\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n    )\n}\n\nexport default NavBar;","import React from 'react';\n\nconst Home = () => {\n  return(\n\n  <h1>Home Page</h1>\n  \n  )  \n}\n  \nexport default Home;","import React from 'react';\nimport {Alert} from 'react-bootstrap';\n\nconst Message = props =>{\n\nif(props.message.msgError)\n  return(\n     <Alert variant=\"danger\">{props.message.msgBody}</Alert>\n  )\nelse\n  return(\n    <Alert variant=\"primary\">{props.message.msgBody}</Alert>\n  )\n}\n\nexport default Message;","import React, { useState, useContext } from 'react';\nimport AuthService from '../Services/AuthService';\nimport Message from '../Components/Message';\nimport {AuthContext} from '../Context/AuthContext';\n\nconst Login = props =>{\n  const[user, setUser] = useState({username: \"\", password: \"\"})\n  const [message, setmessage] = useState(null);\n  const authContext = useContext(AuthContext);\n\n  const onSubmit = e => {\n    e.preventDefault();\n    AuthService.login(user).then(data => {\n      const { isAuthenticated, user, message } = data;\n      if(isAuthenticated){\n        authContext.setUser(user);\n        authContext.setIsAuthenticated(isAuthenticated);\n        props.history.push('/todos')\n      }\n      else\n        setmessage(message);\n    })\n  }\n\n  const onChange = e => { \n    setUser({...user,[e.target.name] : e.target.value})\n    console.log(user);\n  }\n\n  return(\n    <div>\n        <form onSubmit={onSubmit}>\n        <h3>Please Sign in</h3>\n        <label htmlFor=\"username\" className=\"sr-only\">Username</label>\n        <input type=\"text\"  \n              name=\"username\" \n              onChange={onChange} \n              className=\"form-control\" \n              placeholder=\"Enter Username\">\n        </input>\n        <label htmlFor=\"password\" className=\"sr-only\">Username</label>\n        <input type=\"password\"  \n               name=\"password\" \n               onChange={onChange} \n               className=\"form-control\" \n               placeholder=\"Enter Password\">\n        </input>\n        <button className=\"btn btn-lg btn-primary btn-block\"\n                type=\"submit\"\n        >Log in\n        </button>\n      </form>\n      {message ? <Message message={message} /> : null}\n    </div>\n  )\n}\n\nexport default Login;","import React, { useState, useRef, useEffect} from 'react';\nimport AuthService from '../Services/AuthService';\nimport Message from '../Components/Message';\n\nconst Register = props =>{\n  const[user, setUser] = useState({username: \"\", password: \"\"})\n  const [message, setMessage] = useState(null);\n  let timeID = useRef(null);\n\n  useEffect(() =>{\n      return () =>{\n        clearTimeout(timeID);\n      }\n  }, [])\n\n  const onSubmit = e => {\n    e.preventDefault();\n    AuthService.register(user).then(data => {\n      const { message } = data;\n      setMessage(message);\n      resetForm();\n      if(!message.msgError){\n        timeID = setTimeout(() =>{\n          props.history.push('/login');\n        }, 2000)\n      }\n    })\n  }\n\n  const onChange = e => { \n    setUser({...user,[e.target.name] : e.target.value})\n    console.log(user);\n  }\n\n  const resetForm = () =>{\n    setUser({username: \"\", password: \"\"})\n  }\n\n  return(\n    <div>\n        <form onSubmit={onSubmit}>\n        <h3 className=\"m-2\">Register to Start Exploring</h3>\n        <label htmlFor=\"username\" className=\"sr-only\">Username</label>\n        <input type=\"text\"  \n              name=\"username\" \n              value={user.username}\n              onChange={onChange} \n              className=\"form-control m-2\" \n              placeholder=\"Enter Username\">\n        </input>\n        <label htmlFor=\"password\" className=\"sr-only\">Username</label>\n        <input type=\"password\"  \n               name=\"password\" \n               value={user.password}\n               onChange={onChange} \n               className=\"form-control m-2\" \n               placeholder=\"Enter Password\">\n        </input>\n        <button className=\"btn btn-lg btn-primary btn-block m-2\"\n                type=\"submit\"\n        >Register\n        </button>\n      </form>\n      {message ? <Message message={message} /> : null}\n    </div>\n  )\n}\n\nexport default Register;","import React from 'react';\n\nconst TodoItem = props =>{\n  return(\n    <li>{props.todo.name}</li>\n  )\n}\n\nexport default TodoItem;","export default {\n  getTodos : () =>{\n    return fetch('user/todos')\n            .then(response =>{\n              if(response.status !== 401){\n                return response.json().then(data => data)\n              }else\n                  return {message: {msgBody : \"UnAuthorised\"}, msgError: true}\n            });\n  },\n  postTodo : todo =>{\n    return fetch('user/todo' ,{\n        method: \"post\",\n        body: JSON.stringify(todo),\n        headers: {\n          'Content-Type' : 'application/json'\n        }\n    }).then(response=>{\n      if(response.status !== 401){\n        return response.json().then(data => data)\n      }else\n      return {message: {msgBody : \"UnAuthorised\"}, msgError: true}\n    })\n  }\n}","import React, { useState, useContext, useEffect } from 'react';\nimport TodoItem from './TodoItem';\nimport TodoService from '../Services/TodoService';\nimport { AuthContext } from \"../Context/AuthContext\";\nimport Message from './Message';\n\nconst Todos = props =>{\n    const [todo,setTodo] = useState({name: \"\"});\n    const [todos,setTodos] = useState([]);\n    const [message, setMessage] = useState(null);\n    const authContext = useContext(AuthContext);\n\n    useEffect(()=>{\n      TodoService.getTodos().then(data=>{\n        setTodos(data.todos);\n      })\n    },[]);\n\n    const onSubmit = e =>{\n      e.preventDefault();\n      TodoService.postTodo(todo).then(data=>{\n        const {message} = data;\n        resetForm();\n        if(!message.msgError){\n          TodoService.getTodos().then(getData=>{\n            setTodos(getData.todos);\n            setMessage(message);\n          })\n        }\n        else if(message.msgBody === \"UnAuthorised\"){\n          setMessage(message);\n          authContext.setUser({username: \"\"})\n          authContext.setIsAuthenticated(false)\n        }\n        else{\n          setMessage(message);\n        }\n      })\n    }\n\n    const onChange = e =>{\n      setTodo({name : e.target.value});\n    }\n\n    const resetForm = () =>{\n      setTodo({name: \"\"});\n    }\n\n    return(\n      <div>\n        <ul className=\"list-group\">\n          {\n            todos.map(todo =>{\n              return <TodoItem key={todo._id} todo={todo}></TodoItem>\n            })\n          }\n        </ul>\n        <br/>\n        <form onSubmit={onSubmit}>\n          <label htmlFor=\"todo\">Enter todo</label>\n          <input type=\"text\"\n                  name=\"todo\"\n                  value={todo.name}\n                  onChange={onChange}\n                  className=\"form-control\"  \n                  placeholder=\"Please Enter Todo\"\n          >\n          </input>\n          <button className=\"btn btn-lg btn-primary btn-block\" \n          type=\"submit\">Submit</button>\n        </form>\n        {message ? <Message message={message}/> : null }\n      </div>\n    )\n}\n\nexport default Todos;","import React, { useEffect, useRef, useState, useCallback } from \"react\";\nimport axios from \"axios\";\nimport { loadModules } from \"esri-loader\";\nimport \"./mapcss.css\";\n\nconst WebMapView = () => {\nconst [favourite,setFavourite] = useState({Location: \"\"});\nconst onSaveFav = useCallback(function (event) {\n  // This event fires for each click on any action\n  if (event.action.id === \"save-fav\") {\n    let popupInfo = viewRef.current.popup.selectedFeature.attributes.Location;\n    console.log(popupInfo);\n    axios.post(\"user/favourite\", popupInfo).then((response)=>{\n      setFavourite(response.config);\n         \n    })\n  }\n  });\n  console.log(favourite.data);\n  const mapRef = useRef();\n  const viewRef = useRef();\n\n  useEffect(() => {\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\n    loadModules(\n      [\n        \"esri/Map\",\n        \"esri/views/MapView\",\n        \"esri/widgets/Locate\",\n        \"esri/Graphic\",\n        \"esri/layers/GraphicsLayer\",\n      ],\n      { css: true }\n    ).then(([ArcGISMap, MapView, Locate, Graphic, GraphicsLayer]) => {\n      const map = new ArcGISMap({\n        basemap: \"topo-vector\",\n      });\n\n      // LOAD THE MAP VIEW AT THE REF'S DOM NODE\n\n      const view = new MapView({\n        container: mapRef.current,\n        map: map,\n        center: [138, -34],\n        zoom: 6,\n      });\n\n      viewRef.current = view;\n\n      // LOCATE BUTTON\n      var locateWidget = new Locate({\n        view: view, // Attaches the Locate button to the view\n        graphic: new Graphic({\n          symbol: { type: \"simple-marker\" }, // overwrites the default symbol used for the graphic placed at the location of the user when found\n        }),\n      });\n\n      //MAP COORDINATES INFO\n\n      var coordsWidget = document.createElement(\"div\");\n      coordsWidget.id = \"coordsWidget\";\n      coordsWidget.className = \"esri-widget esri-component\";\n      coordsWidget.style.padding = \"7px 15px 5px\";\n\n      view.ui.add(coordsWidget, \"bottom-right\");\n\n      function showCoordinates(pt) {\n        var coords =\n          \"Lat/Lon \" +\n          pt.latitude.toFixed(3) +\n          \" \" +\n          pt.longitude.toFixed(3) +\n          \" | Scale 1:\" +\n          Math.round(view.scale * 1) / 1 +\n          \" | Zoom \" +\n          view.zoom;\n        coordsWidget.innerHTML = coords;\n      }\n\n      view.watch(\"stationary\", function (isStationary) {\n        showCoordinates(view.center);\n      });\n\n      view.on(\"pointer-move\", function (evt) {\n        showCoordinates(view.toMap({ x: evt.x, y: evt.y }));\n      });\n\n      //ADDING WIDGETS TO THE MAP\n      view.ui.add(locateWidget, \"top-right\");\n      view.ui.add(coordsWidget, \"bottom-right\");\n\n      // ADD POINTS TO THE MAP\n      var graphicsLayer = new GraphicsLayer();\n      map.add(graphicsLayer);\n\n      var simpleMarkerSymbol = {\n        type: \"simple-marker\",\n        color: [226, 119, 40], // orange\n        outline: {\n          color: [255, 255, 255], // white\n          width: 1,\n        },\n      };\n\n      // DEFINES AN ACTION TO BUTTON SAVE\n      var saveFavorite = {\n        title: \"Save\",\n        // The ID FOR REFERENCE TO THE EVENT HANDLER\n        id: \"save-fav\",\n\n        className: \"esri-icon-grant\",\n      };\n      // ADDS THE CUSTOM ACTION TO POPUP\n      view.popup.actions.push(saveFavorite);\n\n      view.popup.on(\"trigger-action\", onSaveFav);\n\n      //FOR LOOP FOR GENERATING POINTS IN THE MAP\n      axios.get(\"/user/dots\").then((res) => {\n        let dots = res.data;\n        for (var i = 0; i < dots.length; i++) {\n          var popupTemplate = {\n            title: dots[i].Name,\n            content: dots[i].Location,\n          };\n          var pointGraphic = new Graphic({\n            geometry: dots[i].point,\n            symbol: simpleMarkerSymbol,\n            attributes: dots[i],\n            popupTemplate: popupTemplate,\n          });\n\n          //ADDING POPUPS TO THE POINTS\n          graphicsLayer.add(pointGraphic);\n        }\n      });\n\n      //implementat dot model\n      //implementer seeds do dots model\n\n      return () => {\n        if (view) {\n          // destroy the map view\n          view.container = null;\n        }\n      };\n    });\n  },[]);\n\n  return (\n    <div>\n      <div className=\"webmap\" ref={mapRef} />\n  <div>{favourite.data}</div>\n\n    </div>\n  );\n};\n\nexport default WebMapView;","//Protect routes\nimport React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { AuthContext } from '../Context/AuthContext';\n\nconst PrivateRoute = ({component: Component, ...rest})=>{\n  const { isAuthenticated, user } = useContext(AuthContext);\n  return(\n    <Route {...rest} render={props =>{\n      if(!isAuthenticated)\n      return <Redirect to={{pathname: '/login', \n                            state: {from: props.location}}} >\n            </Redirect>\n    }}\n   />\n  )\n}\n\nexport default PrivateRoute;","import React from 'react';\nimport NavBar from './Components/NavBar';\nimport Home from './Components/Home';\nimport Login from './Components/Login';\nimport Register from './Components/Register';\nimport Todos from './Components/Todos';\nimport WebMapView from './Components/MapComponent';\nimport PrivateRoute from './hocs/PrivateRoute';\nimport {BrowserRouter as Router, Route} from 'react-router-dom';\n\n\nfunction App() {\n\n  return (\n    <Router>\n      <NavBar/>\n      <Route exact path=\"/\" component={Home} />\n      <Route exact path=\"/login\" component={Login} />\n      <Route exact path=\"/register\" component={Register} />\n      <PrivateRoute path='/todos' component={Todos} />\n      <Route exact path=\"/todos\" component={Todos} />\n      <Route exact path=\"/map\" component={WebMapView} />\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport AuthProvider from './Context/AuthContext'\nimport App from './App';\n\n\n\nReactDOM.render(<AuthProvider> <App /> </AuthProvider>, document.getElementById('root'));\n\n\n "],"sourceRoot":""}